(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{680:function(e,r,t){"use strict";t.r(r);var n,o,a,i=t(71),s=t(33),l=t(177),u=t.n(l),c=t(94),p=t(90),f=t.n(p),d=t(72),v=t(77),m=t(1),g=t(46),h=t(18),w=t(87),b=(t(22),t(178),n="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,r,t,o){var a=e&&e.defaultProps,i=arguments.length-3;if(r||0===i||(r={}),r&&a)for(var s in a)void 0===r[s]&&(r[s]=a[s]);else r||(r=a||{});if(1===i)r.children=o;else if(i>1){for(var l=Array(i),u=0;u<i;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:n,type:e,key:void 0===t?null:""+t,ref:null,props:r,_owner:null}}),y=function(){function e(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(r,t,n){return t&&e(r.prototype,t),n&&e(r,n),r}}(),O=(o=["\n  margin-left: 10px;\n"],a=["\n  margin-left: 10px;\n"],Object.freeze(Object.defineProperties(o,{raw:{value:Object.freeze(a)}})));function P(e,r){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!r||"object"!=typeof r&&"function"!=typeof r?e:r}var j=g.b.button(O),k=b("legend",{},void 0,"Register"),C=b("label",{htmlFor:"inputEmail",className:"col-lg-2 control-label"},void 0,"Email"),x=b("label",{htmlFor:"inputPassword",className:"col-lg-2 control-label"},void 0,"Password"),E=b(h.a,{className:"btn btn-default",to:"/"},void 0,"Cancel"),R=function(e){function r(){var e,t,n,o,a,i=this;!function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,r);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return t=n=P(this,(e=r.__proto__||Object.getPrototypeOf(r)).call.apply(e,[this].concat(l))),n.state={viewEntersAnim:!0,email:"",password:"",warning:null},n.handlesOnEmailChange=function(e){if(e){e.preventDefault();var r=e.target.value;n.setState({email:r})}},n.handlesOnPasswordChange=function(e){e&&(e.preventDefault(),n.setState({password:e.target.value}))},n.handlesOnRegister=(o=regeneratorRuntime.mark(function e(r){var t,o,a,s,l,u,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r&&r.preventDefault(),t=n.props,o=t.registerUser,a=t.history,s=n.state,l=s.email,u=s.password,c={username:l,password:u},n.setState({warning:null}),n.isValidEmail(l)){e.next=8;break}return n.setState({warning:{message:"Email is not valid."}}),e.abrupt("return");case 8:if(n.isValidPassword(u)){e.next=11;break}return n.setState({warning:{message:"Password is empty or not valid."}}),e.abrupt("return");case 11:return e.prev=11,e.next=14,o({user:c});case 14:a.push({pathname:"/protected"}),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(11),console.log("register user went wrong..., error: ",e.t0);case 20:case"end":return e.stop()}},e,i,[[11,17]])}),a=function(){var e=o.apply(this,arguments);return new Promise(function(r,t){return function n(o,a){try{var i=e[o](a),s=i.value}catch(e){return void t(e)}if(!i.done)return Promise.resolve(s).then(function(e){n("next",e)},function(e){n("throw",e)});r(s)}("next")})},function(e){return a.apply(this,arguments)}),n.closeError=function(e){e&&e.preventDefault()},n.closeWarning=function(e){e&&e.preventDefault(),n.setState({warning:null})},P(n,t)}return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function, not "+typeof r);e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(e,r):e.__proto__=r)}(r,m["PureComponent"]),y(r,[{key:"componentDidMount",value:function(){(0,this.props.enterRegister)()}},{key:"componentWillUnmount",value:function(){(0,this.props.leaveRegister)()}},{key:"render",value:function(){var e=this.state,r=e.email,t=e.password,n=e.warning,o=this.props,a=o.mutationLoading,i=o.error;return b("div",{},void 0,b("div",{className:"row"},void 0,b("div",{className:"col-md-4 col-md-offset-4"},void 0,b("form",{className:"form-horizontal",noValidate:!0},void 0,b("fieldset",{},void 0,k,b("div",{className:"form-group"},void 0,C,b("div",{className:"col-lg-10"},void 0,b("input",{type:"text",className:"form-control",id:"inputEmail",placeholder:"Email",value:r,onChange:this.handlesOnEmailChange}))),b("div",{className:"form-group"},void 0,x,b("div",{className:"col-lg-10"},void 0,b("input",{type:"password",className:"form-control",id:"inputPassword",placeholder:"Password",value:t,onChange:this.handlesOnPasswordChange}))),b("div",{className:"form-group"},void 0,b("div",{className:"col-lg-10 col-lg-offset-2"},void 0,E,b(j,{className:"btn btn-primary",disabled:a,onClick:this.handlesOnRegister},void 0,"Register"))))),b("div",{style:{height:"150px"}},void 0,b(w.d,{showAlert:!!n,warningTitle:"Warning",warningMessage:n?n.message:"",onClose:this.closeWarning}),b(w.b,{showAlert:!!i,errorTitle:"Error",errorMessage:i?i.message:"",onClose:this.closeError})))))}},{key:"isValidEmail",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return!!(e&&e.trim().length>0)}},{key:"isValidPassword",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return!!(e&&e.trim().length>0)}}]),r}(),N=t(89),U=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},S=function(e,r){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(r)}}))}(["\n  mutation CreateUser($user: CreateUserInput!) {\n    createUser(input: $user) {\n      token\n    }\n  }\n"],["\n  mutation CreateUser($user: CreateUserInput!) {\n    createUser(input: $user) {\n      token\n    }\n  }\n"]);var A=u()(S),_={props:function(e){var r=e.ownProps,t=e.mutate;return{registerUser:function(e){var n,o=this;return(n=regeneratorRuntime.mark(function n(){var a,i,s;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r.setLoadingStateForUserRegister(),n.prev=1,a={variables:U({},e)},n.next=5,t(a);case 5:return i=n.sent,s=i.data.createUser.token,r.receivedUserRegister(s,e),r.unsetLoadingStateForUserRegister(),n.abrupt("return",Promise.resolve());case 12:return n.prev=12,n.t0=n.catch(1),r.errorUserRegister(n.t0),r.unsetLoadingStateForUserRegister(),n.abrupt("return",Promise.reject(n.t0));case 17:case"end":return n.stop()}},n,o,[[1,12]])}),function(){var e=n.apply(this,arguments);return new Promise(function(r,t){return function n(o,a){try{var i=e[o](a),s=i.value}catch(e){return void t(e)}if(!i.done)return Promise.resolve(s).then(function(e){n("next",e)},function(e){n("throw",e)});r(s)}("next")})})()}}}};r.default=f()(Object(N.a)(),Object(i.b)(function(e){return{currentView:e.views.currentView,userIsAuthenticated:e.userAuth.isAuthenticated,mutationLoading:e.userAuth.mutationLoading,error:e.userAuth.error}},function(e){return Object(s.bindActionCreators)(U({},d,v),e)}),Object(c.graphql)(A,_))(R)}}]);